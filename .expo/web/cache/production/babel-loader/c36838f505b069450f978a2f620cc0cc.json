{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _taggedTemplateLiteralLoose from\"@babel/runtime/helpers/taggedTemplateLiteralLoose\";var _templateObject,_templateObject2;import\"react-native-gesture-handler\";import React,{useContext}from\"react\";import Alert from\"react-native-web/dist/exports/Alert\";import View from\"react-native-web/dist/exports/View\";import CustomInput from\"./components/generics/CustomInput\";import CustomTouchableOpacity from\"./components/generics/CustomTouchableOpacity\";import Heading from\"./components/generics/Heading\";import styled from\"styled-components/native\";import logo from\"./images/logo-tap.png\";import APIHandler from\"./APIHandler\";import RulewebContext from\"./RulewebContext\";import{EmailIsValid,isComplete}from\"./Validations\";import{useState}from\"react/cjs/react.development\";import{SafeAreaView}from\"react-native-safe-area-context\";import*as Device from\"expo-device\";var HeaderLogo=styled.Image(_templateObject||(_templateObject=_taggedTemplateLiteralLoose([\"\\n  margin: 44px auto 60px;\\n  width: 157px;\\n  height: 53px;\\n\"])));var Wrapper=styled.View(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose([\"\\n  background: white;\\n  padding: 16px 24px;\\n  display: flex;\\n  flex-direction: column;\\n  flex-wrap: nowrap;\\n  justify-content: center;\\n  align-content: stretch;\\n  align-items: stretch;\\n  height: 100%;\\n\"])));export default function Homescreen(_ref){var navigation=_ref.navigation;var _useContext=useContext(RulewebContext),email=_useContext.email,setEmail=_useContext.setEmail,password=_useContext.password,setPassword=_useContext.setPassword,isAuthorized=_useContext.isAuthorized,setIsAuthorized=_useContext.setIsAuthorized,shopData=_useContext.shopData,setShopData=_useContext.setShopData;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),emailInp=_useState2[0],setEmailInp=_useState2[1];var handleEmail=function handleEmail(inp){EmailIsValid(inp)&&setEmail(inp);setEmailInp(inp);};function clearInputs(){setEmailInp(\"\");setPassword(\"\");}var handleSubmit=function handleSubmit(e){APIHandler.post(\"/shops/login\",{email:email,password:password}).then(function(res){if(res.status===200){setIsAuthorized(true);setShopData({logo:res.data.logo.url,email:res.data.email});clearInputs();navigation.navigate(\"Dashboard\");}}).catch(function(err){Device.brand!=null?Alert.alert(\"Hubo un error\",\"Verifica tus datos e intenta nuevamente\",[{text:\"OK\",onPress:function onPress(){return clearInputs();}}]):alert(\"Hubo un error. Verifica tus datos e intenta nuevamente.\");});};return React.createElement(SafeAreaView,{style:{display:\"flex\",flex:1}},React.createElement(Wrapper,null,React.createElement(HeaderLogo,{source:logo}),React.createElement(Heading,{title:\"Iniciar Sesi\\xF3n\"}),React.createElement(View,{style:{flexGrow:1,rowGap:24}},React.createElement(CustomInput,{placeholder:\"Email\",infoText:\"Tu email es el mismo que el de la App\",value:emailInp,onChangeText:function onChangeText(txt){return handleEmail(txt);}}),React.createElement(CustomInput,{placeholder:\"PIN\",infoText:\"Tu clave de seguridad es la misma que el de la App\",secureTextEntry:true,value:password,name:\"password\",onChangeText:function onChangeText(txt){return setPassword(txt);}})),React.createElement(CustomTouchableOpacity,{title:\"Iniciar Sesion\",disabled:!isComplete(email,password),behavior:handleSubmit})));}","map":{"version":3,"sources":["/Users/augustotoloza/Documents/School/ruletap-mobile/ruleweb-rn/Homescreen.js"],"names":["React","useContext","CustomInput","CustomTouchableOpacity","Heading","styled","logo","APIHandler","RulewebContext","EmailIsValid","isComplete","useState","SafeAreaView","Device","HeaderLogo","Image","Wrapper","View","Homescreen","navigation","email","setEmail","password","setPassword","isAuthorized","setIsAuthorized","shopData","setShopData","emailInp","setEmailInp","handleEmail","inp","clearInputs","handleSubmit","e","post","then","res","status","data","url","navigate","catch","err","brand","Alert","alert","text","onPress","display","flex","flexGrow","rowGap","txt"],"mappings":"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","sourcesContent":["import \"react-native-gesture-handler\";\nimport React, { useContext } from \"react\";\nimport { Alert, View } from \"react-native\";\nimport CustomInput from \"./components/generics/CustomInput\";\nimport CustomTouchableOpacity from \"./components/generics/CustomTouchableOpacity\";\nimport Heading from \"./components/generics/Heading\";\nimport styled from \"styled-components/native\";\nimport logo from \"./images/logo-tap.png\";\nimport APIHandler from \"./APIHandler\";\nimport RulewebContext from \"./RulewebContext\";\nimport { EmailIsValid, isComplete } from \"./Validations\";\nimport { useState } from \"react/cjs/react.development\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport * as Device from \"expo-device\";\n\nconst HeaderLogo = styled.Image`\n  margin: 44px auto 60px;\n  width: 157px;\n  height: 53px;\n`;\nconst Wrapper = styled.View`\n  background: white;\n  padding: 16px 24px;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: center;\n  align-content: stretch;\n  align-items: stretch;\n  height: 100%;\n`;\nexport default function Homescreen({ navigation }) {\n  const {\n    email,\n    setEmail,\n    password,\n    setPassword,\n    isAuthorized,\n    setIsAuthorized,\n    shopData,\n    setShopData,\n  } = useContext(RulewebContext);\n  const [emailInp, setEmailInp] = useState(\"\");\n  const handleEmail = (inp) => {\n    EmailIsValid(inp) && setEmail(inp);\n    setEmailInp(inp);\n  };\n  function clearInputs() {\n    setEmailInp(\"\");\n    setPassword(\"\");\n  }\n  const handleSubmit = (e) => {\n    APIHandler.post(\"/shops/login\", { email, password })\n      .then((res) => {\n        if (res.status === 200) {\n          setIsAuthorized(true);\n          setShopData({\n            logo: res.data.logo.url,\n            email: res.data.email,\n          });\n          clearInputs();\n          navigation.navigate(\"Dashboard\");\n        }\n      })\n      .catch((err) => {\n        Device.brand != null\n          ? Alert.alert(\n              \"Hubo un error\",\n              \"Verifica tus datos e intenta nuevamente\",\n              [{ text: \"OK\", onPress: () => clearInputs() }]\n            )\n          : alert(\"Hubo un error. Verifica tus datos e intenta nuevamente.\");\n      });\n  };\n  return (\n    <SafeAreaView style={{ display: \"flex\", flex: 1 }}>\n      <Wrapper>\n        <HeaderLogo source={logo} />\n        <Heading title=\"Iniciar SesiÃ³n\" />\n        <View style={{ flexGrow: 1, rowGap: 24 }}>\n          <CustomInput\n            placeholder=\"Email\"\n            infoText=\"Tu email es el mismo que el de la App\"\n            value={emailInp}\n            onChangeText={(txt) => handleEmail(txt)}\n          />\n          <CustomInput\n            placeholder=\"PIN\"\n            infoText=\"Tu clave de seguridad es la misma que el de la App\"\n            secureTextEntry={true}\n            value={password}\n            name=\"password\"\n            onChangeText={(txt) => setPassword(txt)}\n          />\n        </View>\n        <CustomTouchableOpacity\n          title=\"Iniciar Sesion\"\n          disabled={!isComplete(email, password)}\n          behavior={handleSubmit}\n        />\n      </Wrapper>\n    </SafeAreaView>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}