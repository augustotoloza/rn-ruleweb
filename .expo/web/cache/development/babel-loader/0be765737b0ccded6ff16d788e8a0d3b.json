{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _jsxFileName = \"/Users/augustotoloza/Documents/School/ruletap-mobile/ruleweb-rn/Dashboard.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"react-native-gesture-handler\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Comfortaa_700Bold, Comfortaa_400Regular, useFonts } from \"@expo-google-fonts/comfortaa\";\nimport { OpenSans_400Regular } from \"@expo-google-fonts/open-sans\";\nimport DashboardHeader from \"./components/DashboardHeader\";\nimport CustomInput from \"./components/generics/CustomInput\";\nimport CustomTouchableOpacity from \"./components/generics/CustomTouchableOpacity\";\nimport styled from \"styled-components/native\";\nimport RulewebContext from \"./RulewebContext\";\nimport PrizeStat from \"./components/generics/PrizeStat\";\nimport APIHandler from \"./APIHandler\";\nimport { EmailIsValid, isComplete } from \"./Validations\";\nvar Wrapper = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  background: white;\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n\"])));\nvar ContentWrapper = styled.View(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  background: white;\\n  display: flex;\\n  flex-direction: column;\\n  flex-grow: 1;\\n  padding: 20px 16px 24px;\\n  max-width: 600px;\\n  align-self: center;\\n\"])));\nvar Centered = styled.View(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n  background: white;\\n  display: flex;\\n  flex-direction: column;\\n  flex-wrap: nowrap;\\n  align-content: stretch;\\n  align-items: stretch;\\n\"])));\nvar Title = styled.Text(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"\\n  font-size: 18px;\\n  line-height: 24px;\\n  text-align: left;\\n  letter-spacing: 0.15px;\\n  color: #002350;\\n\"])));\nvar Paragraph = styled.Text(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"\\n  font-size: 14px;\\n  line-height: 24px;\\n  text-align: left;\\n  letter-spacing: 0.15px;\\n  color: #353535;\\n\"])));\nexport default function Dashboard(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      userEmail = _useState2[0],\n      setUserEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prizeToken = _useState4[0],\n      setPrizeToken = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shopRewards = _useState6[0],\n      setShopRewards = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userEmailInp = _useState8[0],\n      setUserEmailInp = _useState8[1];\n\n  var _useContext = useContext(RulewebContext),\n      isAuthorized = _useContext.isAuthorized,\n      setIsAuthorized = _useContext.setIsAuthorized,\n      shopData = _useContext.shopData,\n      email = _useContext.email;\n\n  useFonts({\n    Comfortaa_700Bold: Comfortaa_700Bold,\n    Comfortaa_400Regular: Comfortaa_400Regular,\n    OpenSans_400Regular: OpenSans_400Regular\n  });\n  useEffect(function () {\n    getRewards();\n  }, []);\n\n  function getRewards() {\n    var res;\n    return _regeneratorRuntime.async(function getRewards$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(APIHandler.post(\"/rewards/byShop\", {\n              email: email\n            }));\n\n          case 2:\n            res = _context.sent;\n            setShopRewards(res.data);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var handleUserEmail = function handleUserEmail(inp) {\n    EmailIsValid(inp) && setUserEmail(inp);\n    setUserEmailInp(inp);\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    APIHandler.post(\"/rewards/redeem\", {\n      token: prizeToken,\n      email: userEmail,\n      shop: shopData.email\n    }).then(function (res) {\n      if (res.status === 200) {\n        navigation.navigate(\"Premio Canjeado\");\n      }\n    }).catch(function (err) {\n      console.log(\"Hubo un error, intenta nuevamente\");\n    });\n  };\n\n  if (isAuthorized) {\n    return React.createElement(Wrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, React.createElement(DashboardHeader, {\n      onPress: function onPress() {\n        return setIsAuthorized(false);\n      },\n      shopData: shopData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }), React.createElement(ContentWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, React.createElement(Centered, {\n      style: {\n        flexGrow: 0,\n        rowGap: 12\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, React.createElement(Title, {\n      style: {\n        fontFamily: \"Comfortaa_700Bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"Ingres\\xE1 el mail y el c\\xF3digo de canje.\"), React.createElement(Paragraph, {\n      style: {\n        fontFamily: \"OpenSans_400Regular\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, \"Este se envi\\xF3 por mail al cliente al momento de ganar el premio.\")), React.createElement(Centered, {\n      style: {\n        flexGrow: 0,\n        rowGap: 15,\n        marginTop: 34,\n        marginBottom: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, React.createElement(CustomInput, {\n      placeholder: \"Email\",\n      value: userEmailInp,\n      onChangeText: function onChangeText(txt) {\n        return handleUserEmail(txt);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }), React.createElement(CustomInput, {\n      placeholder: \"Codigo de canje\",\n      value: prizeToken,\n      onChangeText: function onChangeText(txt) {\n        return setPrizeToken(txt);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    })), React.createElement(CustomTouchableOpacity, {\n      title: \"Canjear\",\n      behavior: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    })), React.createElement(PrizeStat, {\n      name: \"Total premios entregados\",\n      number: shopRewards.redeemed,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }), React.createElement(PrizeStat, {\n      name: \"Listos para canjear\",\n      number: shopRewards.available,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    navigation.navigate(\"Err\");\n  }\n}","map":{"version":3,"sources":["/Users/augustotoloza/Documents/School/ruletap-mobile/ruleweb-rn/Dashboard.js"],"names":["React","useContext","useEffect","useState","Comfortaa_700Bold","Comfortaa_400Regular","useFonts","OpenSans_400Regular","DashboardHeader","CustomInput","CustomTouchableOpacity","styled","RulewebContext","PrizeStat","APIHandler","EmailIsValid","isComplete","Wrapper","View","ContentWrapper","Centered","Title","Text","Paragraph","Dashboard","navigation","userEmail","setUserEmail","prizeToken","setPrizeToken","shopRewards","setShopRewards","userEmailInp","setUserEmailInp","isAuthorized","setIsAuthorized","shopData","email","getRewards","post","res","data","handleUserEmail","inp","handleSubmit","e","token","shop","then","status","navigate","catch","err","console","log","flexGrow","rowGap","fontFamily","marginTop","marginBottom","txt","redeemed","available"],"mappings":"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","sourcesContent":["import \"react-native-gesture-handler\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport {\n  Image,\n  TouchableOpacity,\n  ImageBackground,\n  StyleSheet,\n  View,\n} from \"react-native\";\nimport {\n  Comfortaa_700Bold,\n  Comfortaa_400Regular,\n  useFonts,\n} from \"@expo-google-fonts/comfortaa\";\nimport { OpenSans_400Regular } from \"@expo-google-fonts/open-sans\";\nimport DashboardHeader from \"./components/DashboardHeader\";\nimport CustomInput from \"./components/generics/CustomInput\";\nimport CustomTouchableOpacity from \"./components/generics/CustomTouchableOpacity\";\nimport styled from \"styled-components/native\";\nimport RulewebContext from \"./RulewebContext\";\nimport PrizeStat from \"./components/generics/PrizeStat\";\nimport APIHandler from \"./APIHandler\";\nimport { EmailIsValid, isComplete } from \"./Validations\";\n\nconst Wrapper = styled.View`\n  background: white;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\nconst ContentWrapper = styled.View`\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  padding: 20px 16px 24px;\n  max-width: 600px;\n  align-self: center;\n`;\nconst Centered = styled.View`\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-content: stretch;\n  align-items: stretch;\n`;\nconst Title = styled.Text`\n  font-size: 18px;\n  line-height: 24px;\n  text-align: left;\n  letter-spacing: 0.15px;\n  color: #002350;\n`;\nconst Paragraph = styled.Text`\n  font-size: 14px;\n  line-height: 24px;\n  text-align: left;\n  letter-spacing: 0.15px;\n  color: #353535;\n`;\n\nexport default function Dashboard({ navigation }) {\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [prizeToken, setPrizeToken] = useState(\"\");\n  const [shopRewards, setShopRewards] = useState(\"\");\n  const [userEmailInp, setUserEmailInp] = useState(\"\");\n  const { isAuthorized, setIsAuthorized, shopData, email } =\n    useContext(RulewebContext);\n  useFonts({\n    Comfortaa_700Bold,\n    Comfortaa_400Regular,\n    OpenSans_400Regular,\n  });\n  useEffect(() => {\n    getRewards();\n  }, []);\n  async function getRewards() {\n    const res = await APIHandler.post(\"/rewards/byShop\", { email });\n    setShopRewards(res.data);\n  }\n  const handleUserEmail = (inp) => {\n    EmailIsValid(inp) && setUserEmail(inp);\n    setUserEmailInp(inp);\n  };\n  const handleSubmit = (e) => {\n    APIHandler.post(\"/rewards/redeem\", {\n      token: prizeToken,\n      email: userEmail,\n      shop: shopData.email,\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          navigation.navigate(\"Premio Canjeado\");\n        }\n      })\n      .catch((err) => {\n        console.log(\"Hubo un error, intenta nuevamente\");\n      });\n  };\n\n  if (isAuthorized ) {\n    return (\n      <Wrapper>\n        <DashboardHeader\n          onPress={() => setIsAuthorized(false)}\n          shopData={shopData}\n        />\n        <ContentWrapper>\n          <Centered style={{ flexGrow: 0, rowGap: 12 }}>\n            <Title style={{ fontFamily: \"Comfortaa_700Bold\" }}>\n              Ingresá el mail y el código de canje.\n            </Title>\n            <Paragraph style={{ fontFamily: \"OpenSans_400Regular\" }}>\n              Este se envió por mail al cliente al momento de ganar el premio.\n            </Paragraph>\n          </Centered>\n          <Centered\n            style={{ flexGrow: 0, rowGap: 15, marginTop: 34, marginBottom: 40 }}\n          >\n            <CustomInput\n              placeholder=\"Email\"\n              value={userEmailInp}\n              onChangeText={(txt) => handleUserEmail(txt)}\n            />\n            <CustomInput\n              placeholder=\"Codigo de canje\"\n              value={prizeToken}\n              onChangeText={(txt) => setPrizeToken(txt)}\n            />\n          </Centered>\n          \n          <CustomTouchableOpacity\n            title=\"Canjear\"\n            behavior={handleSubmit}\n            \n          />\n        </ContentWrapper>\n        <PrizeStat\n          name=\"Total premios entregados\"\n          number={shopRewards.redeemed}\n        />\n        <PrizeStat name=\"Listos para canjear\" number={shopRewards.available} />\n      </Wrapper>\n    );\n  } else {\n    navigation.navigate(\"Err\");\n  }\n}\n"]},"metadata":{},"sourceType":"module"}